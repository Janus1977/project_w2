<?php
		//Generated by ManagerGenerator::generate() on 12/05/2017 15:43:03
class ManagerPartie_joueur {
	/** Instance de la classe (managerPartie_joueur) */
	private static $_instance = null;

	/** Connexion a la base de donnees (database) */
	private static $_oConnexion = null;

	/** Liste des objet de la classe (Partie_joueur) */
	private static $_aListePartie_joueur = array();

	/*
	 * Entre ces deux balises vous pourrez mettre votre code specifique a la classe.
	 * Il sera preserve lors de la reconstruction automatique.
	 */
	/*[TAG-Partie_joueur11]*/	/*[/TAG-Partie_joueur11]*/


	protected function __construct() {
		//Generated by ManagerGenerator::generateConstruct() on 12/05/2017 15:43:03
	}

	public function __destruct() {
		//Generated by ManagerGenerator::generateDestruct() on 12/05/2017 15:43:03
		// TODO ??
	}

	public static function getInstance() {
		//Generated by ManagerGenerator::generateGetInstance() on 12/05/2017 15:43:03
		if (is_null(self::$_instance)) {
			self::$_instance = new self;
		}
		return self::$_instance;
	}

	public function __clone() {
		//Generated by ManagerGenerator::generateClone() on 12/05/2017 15:43:03
		throw new Exception(get_class($this).": Le clonage n'est pas autoris&eacute;", E_USER_ERROR);
	}

	public function setConnexion() {
		//Generated by ManagerGenerator::generateSetConnexion() on 12/05/2017 15:43:03
		self::$_oConnexion = database::getInstance();// pas besoin de parametrer, un manager arrive apres la conf
	}

	public function __set($name,$id) {
		//Generated by ManagerGenerator::generateSet() on 12/05/2017 15:43:03
		throw new Exception(get_class($this).": Le set 'noname' n'est pas autoris&eacute;", E_USER_ERROR);
	}

	public function __get($name) {
		//Generated by ManagerGenerator::generateGet() on 12/05/2017 15:43:03
		throw new Exception(get_class($this).": Le get 'noname' n'est pas autoris&eacute;", E_USER_ERROR);
	}

	public function getById($id=-1) {
		//Generated by ManagerGenerator::generateGetById() on 12/05/2017 15:43:03
		if ($id == -1) {
			//Toute les informations
			return FactoryPartie_joueur::getFromTablePartie_joueur($id);
		} else {
			//Verification si l'objet n'est pas en memoire
			if ($id > 0 && !array_key_exists($id,self::$_aListePartie_joueur)) {
				self::$_aListePartie_joueur[$id] = FactoryPartie_joueur::getFromTablePartie_joueur($id);
			}
		}
		return self::$_aListePartie_joueur[$id];
	}

	public function getFromExtTablePartie($partie=-1) {
		//Generated by ManagerGenerator::generateGetFromTableFromFK() on 12/05/2017 15:43:03
		//Verification en memoire
		foreach (self::$_aListePartie_joueur AS $oPartie_joueur) {
			if ($oPartie_joueur->getPartie() == $partie) {
				return $oPartie_joueur;
			}
		}
		// Appel de la methode de la Fabrique
		$oPartie_joueur = FactoryPartie_joueur::getFromExtTablePartie($partie);
		// Memorisation pour plus tard
		self::$_aListePartie_joueur[$oPartie_joueur->getId()] = $oPartie_joueur;
		// Renvoie de la donnee
		return $oPartie_joueur;
	}

	public function deleteCompositeLinksFromPartie($idpartie) {
		//Generated by ManagerGenerator::generateDeleteCompositeLinks() on 12/05/2017 15:43:03
		//TODO
	}

	public function getFromExtTableMembre($membre=-1) {
		//Generated by ManagerGenerator::generateGetFromTableFromFK() on 12/05/2017 15:43:03
		//Verification en memoire
		foreach (self::$_aListePartie_joueur AS $oPartie_joueur) {
			if ($oPartie_joueur->getMembre() == $membre) {
				return $oPartie_joueur;
			}
		}
		// Appel de la methode de la Fabrique
		$oPartie_joueur = FactoryPartie_joueur::getFromExtTableMembre($membre);
		// Memorisation pour plus tard
		self::$_aListePartie_joueur[$oPartie_joueur->getId()] = $oPartie_joueur;
		// Renvoie de la donnee
		return $oPartie_joueur;
	}

	public function deleteCompositeLinksFromMembre($idmembre) {
		//Generated by ManagerGenerator::generateDeleteCompositeLinks() on 12/05/2017 15:43:03
		//TODO
	}

	public function delete($object=array()) {
		//Generated by ManagerGenerator::generateDelete() on 12/05/2017 15:43:03
		// Verification
		if (empty($object)) {
			throw new Exception(get_class($this).": La suppression se fait sur un objet.", E_USER_ERROR);
		}
		// si ce n'est pas une instance de la classe, on la cree
		if (! $object instanceof Partie_joueur) {
			$oPartie_joueur = new Partie_joueur($object['id'],$object['partie'],$object['membre'],$object['ia']);
		} else {
			$oPartie_joueur = $object;
		}
		// Appel de la methode delete de l'objet
		// Tout se passe dans une transaction ouverte plus haut
			// Execution de la requete
		if (database::getInstance()->executeRequete($oPartie_joueur->delete())) {
			// Requete OK
			unset(self::$_aListePartie_joueur[$oPartie_joueur->getId()]);
			return true;
		} else {
			// Requete NOK lancement d'une exception PDO
			throw new PDOException('Erreur sur delete (Partie_joueur)');
		}
	}

	public function update($object=array()) {
		//Generated by ManagerGenerator::generateUpdate() on 12/05/2017 15:43:03
		// Verification
		if (empty($object)) {
			throw new Exception(get_class($this).": la mise &agrave; jour se fait sur un objet.", E_USER_ERROR);
		}
		// si ce n'est pas une instance de la classe, on la cree
		if (! $object instanceof Partie_joueur) {
			$oPartie_joueur = new Partie_joueur($object['id'],$object['partie'],$object['membre'],$object['ia']);
		} else {
			$oPartie_joueur = $object;
		}
		// Maintenant on compare avec celle en session
		if (!empty($_SESSION['partie_joueur']) && sizeof($_SESSION['partie_joueur']->compareTo($oPartie_joueur)) > 0) {
			$_SESSION['partie_joueur'] = $oPartie_joueur;
		}
		if ($oPartie_joueur->getId() == 0) {
			//Go TO SAVE
			self::save($oPartie_joueur);
		} else {
			// on update car les objets sont different
			if (database::getInstance()->executeRequete($oPartie_joueur->update()) === true) {
				//maj id dans la liste
				self::$_aListePartie_joueur[$oPartie_joueur->getId()] = $oPartie_joueur;
				return true;
			} else {
				return false;
			}
		}
	}

	public function save($object=array()) {
		//Generated by ManagerGenerator::generateSave() on 12/05/2017 15:43:03
		// Verification
		if (empty($object)) {
			throw new Exception(get_class($this).": la sauvegarde se fait sur un objet.", E_USER_ERROR);
		}
		// si ce n'est pas une instance de la classe, on la cree
		if (! $object instanceof Partie_joueur) {
			$oPartie_joueur = new Partie_joueur($object['id'],$object['partie'],$object['membre'],$object['ia']);
		} else {
			$oPartie_joueur = $object;
		}
		if ($oPartie_joueur->getId() > 0) {
			//Go TO UPDATE
			self::update($oPartie_joueur);
		} else {
			// Appel de la methode update de l'objet
			if (database::getInstance()->executeRequete($oPartie_joueur->save()) === true) {
				//maj id dans la liste
				self::$_aListePartie_joueur[$oPartie_joueur->getId()] = $oPartie_joueur;
				return true;
			} else {
				return false;
			}
		}
	}

	public function findBy($champ,$data='') {
		//Generated by ManagerGenerator::generateFindBy() on 12/05/2017 15:43:03
		// creation d'un objet de base de la classe
		$object = new Partie_joueur();
		$resultat = array();
		for ($i = 0; $i < sizeof($this -> _aListePartie_joueur); $i++) {
			$object = $this -> _aListePartie_joueur[$i];
			if ($object -> {'_'.strtolower($champ)} == $data) {
				$resultat[] = $object;
			}
		}
		if (sizeof($resultat) > 0) {
			//existe
			return $resultat;
		} else {
			//n'existe pas
			return "Pas de Partie_joueur de ".strtolower($champ)." '".$data."'";
		}
	}

	public function getPartie_joueurVide() {
		//Generated by ManagerGenerator::generateGetObjetVide() on 12/05/2017 15:43:03
		return new Partie_joueur();
	}


	/*
	 * Entre ces deux balises vous pourrez mettre votre code specifique a la classe.
	 * Il sera preserve lors de la reconstruction automatique.
	 */
	/*[TAG-Partie_joueur21]*/	/*[/TAG-Partie_joueur21]*/


}
?>